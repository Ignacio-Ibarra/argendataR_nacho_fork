<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Caja de herramientas para Argendata • argendataR</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="bootstrap-toc.css">
<script src="bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="Caja de herramientas para Argendata">
<meta property="og:description" content="Paquete de herramientas para el flujo de outputs Argendata.">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">argendataR</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.0.9024</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="reference/index.html">Reference</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="contents col-md-9">
<div class="section level1">
<div class="page-header"><h1 id="argendatar">argendataR<a class="anchor" aria-label="anchor" href="#argendatar"></a>
</h1></div>
<!-- badges: start -->
<!-- badges: end -->
<p>Este paquete es un conjunto de funciones para facilitar el flujo de trabajo con fuentes y outputs en Argendata usando R.</p>
<div class="section level2">
<h2 id="requisito">Requisito<a class="anchor" aria-label="anchor" href="#requisito"></a>
</h2>
<p>Para usar muchas de las funciones de este paquete es necesario tener seteado en el .Renviron la variable ‘ARGENDATA_DRIVE’ con el id del directorio de Argendata. Para editar el .Renviron se puede usar <code><a href="https://usethis.r-lib.org/reference/edit.html" class="external-link">usethis::edit_r_environ()</a></code>. Allí se declara de la siguiente forma:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a>ARGENDATA_DRIVE<span class="ot">=</span><span class="st">'xaskooasdklaslkaldd'</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="instalacion">Instalacion<a class="anchor" aria-label="anchor" href="#instalacion"></a>
</h2>
<p>Para instalar el paquete se puede clonar este proyecto y luego abrir el proyecto y usar la función</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">devtools</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_local.html" class="external-link">install_local</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>La función también se puede usar sin abrir el proyecto pero hay que pasarle la ruta a la carpeta del proyecto de <code>argendataR</code>.</p>
<p>Para instalar directo desde github se puede usar</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="fu">devtools</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">"argendata/argendataR"</span><span class="op">)</span></span></code></pre></div>
<p>Pero esta función requiere que esté configurada la variable de entorno ‘GITHUB_PAT’ con el token del PAT de github del usuario, con el que debe tener los permisos necesarios para acceder al repositorio.</p>
</div>
<div class="section level2">
<h2 id="fuentes">Fuentes<a class="anchor" aria-label="anchor" href="#fuentes"></a>
</h2>
<p>Para el trabajo con fuentes hay dos grandes set de funciones<code>raw</code> y <code>clean</code>. Las primeras se usan para el proceso con fuentes en su estado original, las segundas para trabajar con fuentes ya limpias.</p>
<p>Con <code><a href="reference/agregar_fuente_raw.html">agregar_fuente_raw()</a></code> se registra una fuente en la sheet de fuentes raw y carga en la carpeta de <code>BASES DE DATOS/Fuentes/raw</code> el archivo de path_raw. A cada fuente se le asigna automaticamente un id numerico que permite seleccionar la fuente segun aparece en el sheet. Para consultar ids usar <code><a href="reference/fuentes_raw.html">fuentes_raw()</a></code>.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a><span class="fu">library</span>(argendataR)</span>
<span id="cb4-2"><a href="#cb4-2" tabindex="-1"></a><span class="do">## basic example code</span></span>
<span id="cb4-3"><a href="#cb4-3" tabindex="-1"></a><span class="fu">agregar_fuente_raw</span>(<span class="at">url =</span> <span class="st">"https://www.ejemplo.com"</span>,</span>
<span id="cb4-4"><a href="#cb4-4" tabindex="-1"></a>                   <span class="at">nombre =</span> <span class="st">"Ejemplo"</span>,</span>
<span id="cb4-5"><a href="#cb4-5" tabindex="-1"></a>                   <span class="at">institucion =</span> <span class="st">"Ejemplo"</span>,</span>
<span id="cb4-6"><a href="#cb4-6" tabindex="-1"></a>                   <span class="at">actualizable =</span> <span class="cn">TRUE</span>,</span>
<span id="cb4-7"><a href="#cb4-7" tabindex="-1"></a>                   <span class="at">fecha_descarga =</span> <span class="st">"2021-01-01"</span>,</span>
<span id="cb4-8"><a href="#cb4-8" tabindex="-1"></a>                   <span class="at">fecha_actualizar =</span> <span class="st">"2022-01-01"</span>,</span>
<span id="cb4-9"><a href="#cb4-9" tabindex="-1"></a>                   <span class="at">path_raw =</span> <span class="st">"ejemplo.csv"</span>,</span>
<span id="cb4-10"><a href="#cb4-10" tabindex="-1"></a>                   <span class="at">script =</span> <span class="st">"ejemplo.R"</span>)</span></code></pre></div>
<p>Un bloque de código análogo se espera que se use la primera vez que se ejecute un script de descarga de una fuente desde su origen. Sucesivas descargas de una fuente ya registrada deberían usar en cambio:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a><span class="fu">actualizar_fuente_raw</span>(<span class="at">id_fuente =</span> <span class="dv">1</span>,</span>
<span id="cb5-2"><a href="#cb5-2" tabindex="-1"></a>                      <span class="at">fecha_actualizar =</span> <span class="st">"2023-01-01"</span>)</span></code></pre></div>
<p>Esta función actualiza ‘fecha_descarga’ y ‘fecha_actualizar’ de una fuente en la sheet de fuentes en el drive de Argendata. Hace <code>google::drive_upload()</code> de la fuente con overwrite = T pisando la version anterior en el drive. Las fuentes raw se pueden consultar con <code><a href="reference/fuentes_raw.html">fuentes_raw()</a></code>.</p>
<p>Existen funciones analogas para el trabajo con fuentes clean. Las fuentes clean refieren a cada csv disponibilizado a partir de una fuente descargada que debería cumplir con una minima limpieza de nombres de columnas y estar en formato longer. Las funciones no evalúan esas condiciones pero ayudan en su registro sistematico. Vean los siguientes.</p>
<p>Bloque 1</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a><span class="fu">agregar_fuente_clean</span>(<span class="at">id_fuente_raw =</span> <span class="dv">1</span>,</span>
<span id="cb6-2"><a href="#cb6-2" tabindex="-1"></a>                     <span class="at">path_clean =</span> <span class="st">"ejemplo.csv"</span>,</span>
<span id="cb6-3"><a href="#cb6-3" tabindex="-1"></a>                     <span class="at">nombre =</span> <span class="st">"Ejemplo 1"</span>,</span>
<span id="cb6-4"><a href="#cb6-4" tabindex="-1"></a>                     <span class="at">script =</span> <span class="st">"ejemplo1.R"</span></span>
<span id="cb6-5"><a href="#cb6-5" tabindex="-1"></a>                     )</span></code></pre></div>
<p>Bloque 2</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a><span class="fu">agregar_fuente_clean</span>(<span class="at">id_fuente_raw =</span> <span class="dv">1</span>,</span>
<span id="cb7-2"><a href="#cb7-2" tabindex="-1"></a>                     <span class="at">path_clean =</span> <span class="st">"ejemplo.csv"</span>,</span>
<span id="cb7-3"><a href="#cb7-3" tabindex="-1"></a>                     <span class="at">nombre =</span> <span class="st">"Ejemplo 2"</span>,</span>
<span id="cb7-4"><a href="#cb7-4" tabindex="-1"></a>                     <span class="at">script =</span> <span class="st">"ejemplo2.R"</span></span>
<span id="cb7-5"><a href="#cb7-5" tabindex="-1"></a>                     )</span></code></pre></div>
<p>Muchas fuentes clean se pueden relacionar a una misma fuente raw pero cada una debería ser unica. Un bloque de codigo como los anteriores debería aparecer dentro del script que genera cada fuente limpia y usarse solo la primera vez que se ejecute el script. Las fuentes raw se pueden consultar con <code><a href="reference/fuentes_clean.html">fuentes_clean()</a></code>. Sucesivas actualizaciones de una fuente clean ya registrada deberían usar en cambio:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a><span class="fu">actualizar_fuente_clean</span>(<span class="at">id_fuente_clean =</span> <span class="dv">1</span>)</span></code></pre></div>
<p>Esta función actualiza ‘fecha’ de una fuente en la sheet de fuentes clean en el drive de Argendata y hace <code>google::drive_upload()</code> de la fuente con overwrite = T pisando la version anterior en el drive.</p>
</div>
<div class="section level2">
<h2 id="outputs">Outputs<a class="anchor" aria-label="anchor" href="#outputs"></a>
</h2>
<p>El paquete tambien incluye funciones para el trabajo con outputs. La principal funcion es <code><a href="reference/write_output.html">write_output()</a></code>. Esta funcion genera un json con la data y metadata que el proyecto de Argendata requiere para cada dataset. Opcionalmente también escribe un csv usando el estándar de Argendata (UTF-8, double quote agresivo, eol “”, na = ““). Esta función debería aparecer al final de cada script de generación de outputs.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a><span class="fu">write_output</span>( <span class="at">data =</span> df_output,</span>
<span id="cb9-2"><a href="#cb9-2" tabindex="-1"></a>                <span class="at">extension =</span> <span class="st">'csv'</span>,</span>
<span id="cb9-3"><a href="#cb9-3" tabindex="-1"></a>                <span class="at">output_name =</span> <span class="st">'A1_inb_pib'</span>,</span>
<span id="cb9-4"><a href="#cb9-4" tabindex="-1"></a>                <span class="at">subtopico =</span> <span class="st">'ACECON'</span>,</span>
<span id="cb9-5"><a href="#cb9-5" tabindex="-1"></a>                <span class="at">fuentes =</span> <span class="st">'World Development Indicators'</span>,</span>
<span id="cb9-6"><a href="#cb9-6" tabindex="-1"></a>                <span class="at">analista =</span> <span class="st">'Andrés Salles'</span>,</span>
<span id="cb9-7"><a href="#cb9-7" tabindex="-1"></a>                <span class="at">aclaraciones =</span> <span class="cn">NULL</span>,</span>
<span id="cb9-8"><a href="#cb9-8" tabindex="-1"></a>                <span class="at">exportar =</span> <span class="cn">TRUE</span>,</span>
<span id="cb9-9"><a href="#cb9-9" tabindex="-1"></a>                <span class="at">pk =</span> <span class="fu">c</span>(<span class="st">"anio"</span>, <span class="st">"iso3"</span>),</span>
<span id="cb9-10"><a href="#cb9-10" tabindex="-1"></a>                <span class="at">es_serie_tiempo =</span> <span class="cn">TRUE</span>,</span>
<span id="cb9-11"><a href="#cb9-11" tabindex="-1"></a>                <span class="at">columna_indice_tiempo =</span> <span class="st">"anio"</span>,</span>
<span id="cb9-12"><a href="#cb9-12" tabindex="-1"></a>                <span class="at">columna_geo_referencia =</span> <span class="st">"iso3"</span>,</span>
<span id="cb9-13"><a href="#cb9-13" tabindex="-1"></a>                <span class="at">nivel_agregacion =</span> <span class="st">"pais"</span>,</span>
<span id="cb9-14"><a href="#cb9-14" tabindex="-1"></a>                <span class="at">nullables =</span> <span class="cn">FALSE</span>,</span>
<span id="cb9-15"><a href="#cb9-15" tabindex="-1"></a>                <span class="at">etiquetas_indicadores =</span> <span class="fu">list</span>(<span class="st">"diferencia_inb_pbi"</span> <span class="ot">=</span> <span class="st">"Diferencia entre Ingreso Bruto Nacional y PBI"</span>),</span>
<span id="cb9-16"><a href="#cb9-16" tabindex="-1"></a>                <span class="at">unidades =</span> <span class="st">"Porcentaje respecto al PBI"</span>,</span>
<span id="cb9-17"><a href="#cb9-17" tabindex="-1"></a>                <span class="at">classes =</span> <span class="cn">NULL</span>)</span></code></pre></div>
</div>
<div class="section level2">
<h2 id="reference">Reference<a class="anchor" aria-label="anchor" href="#reference"></a>
</h2>
<table class="table">
<colgroup>
<col width="34%">
<col width="65%">
</colgroup>
<thead><tr class="header">
<th>Function</th>
<th>Description</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>
<code><a href="reference/actualizar_fuente_clean.html">actualizar_fuente_clean()</a></code>:</td>
<td>Actualizar informacion de una fuente clean</td>
</tr>
<tr class="even">
<td>
<code><a href="reference/actualizar_fuente_raw.html">actualizar_fuente_raw()</a></code>:</td>
<td>Actualizar informacion de una fuente raw</td>
</tr>
<tr class="odd">
<td>
<code><a href="reference/agregar_fuente_clean.html">agregar_fuente_clean()</a></code>:</td>
<td>Agregar nueva fuente clean</td>
</tr>
<tr class="even">
<td>
<code><a href="reference/agregar_fuente_raw.html">agregar_fuente_raw()</a></code>:</td>
<td>Agregar nueva fuente raw</td>
</tr>
<tr class="odd">
<td>
<code><a href="reference/descargar_fuente_clean.html">descargar_fuente_clean()</a></code>:</td>
<td>Descarga fuente version clean</td>
</tr>
<tr class="even">
<td>
<code><a href="reference/descargar_fuente_raw.html">descargar_fuente_raw()</a></code>:</td>
<td>Descarga fuente version raw</td>
</tr>
<tr class="odd">
<td>
<code><a href="reference/expansor_xvar.html">expansor_xvar()</a></code>:</td>
<td>Expandir una serie usando variaciones de otra serie</td>
</tr>
<tr class="even">
<td>
<code><a href="reference/fuentes.html">fuentes()</a></code>:</td>
<td>Fuentes</td>
</tr>
<tr class="odd">
<td>
<code><a href="reference/fuentes_clean.html">fuentes_clean()</a></code>:</td>
<td>Fuentes clean</td>
</tr>
<tr class="even">
<td>
<code><a href="reference/fuentes_raw.html">fuentes_raw()</a></code>:</td>
<td>Fuentes raw</td>
</tr>
<tr class="odd">
<td>
<code><a href="reference/get_nomenclador_geografico.html">get_nomenclador_geografico()</a></code>:</td>
<td>Devuelve el nomenclador geografico para argendata</td>
</tr>
<tr class="even">
<td>
<code><a href="reference/script_subtopico.html">script_subtopico()</a></code>:</td>
<td>Crea un .R con el esquema basico de script para outputs</td>
</tr>
<tr class="odd">
<td>
<code><a href="reference/subtopico_outputs.html">subtopico_outputs()</a></code>:</td>
<td>Consulta lista de outputs del subtopico/entrega en drive</td>
</tr>
<tr class="even">
<td>
<code><a href="reference/write_csv_fundar.html">write_csv_fundar()</a></code>:</td>
<td>write_csv estilo Fundar</td>
</tr>
<tr class="odd">
<td>
<code><a href="reference/write_output.html">write_output()</a></code>:</td>
<td>Genera json y csv con metadata y data de output para argendata</td>
</tr>
</tbody>
</table>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li>What license is it under?</li>
</ul>
</div>

<div class="community">
<h2 data-toc-skip>Community</h2>
<ul class="list-unstyled">
<li><a href="CONTRIBUTING.html">Contributing guide</a></li>
</ul>
</div>

<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing argendataR</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Juan Gabriel Juara <br><small class="roles"> Maintainer </small>  </li>
</ul>
</div>



  </div>
</div>


      <footer><div class="copyright">
  <p></p>
<p>Developed by Juan Gabriel Juara.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
